!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=7)}({7:function(t,e,n){t.exports=n("TO7d")},TO7d:function(t,e){var n,i,a,o,r,s=!1;function l(){$(".entity-file-remove").each((function(){$(this).unbind("click"),$(this).on("click",(function(t){$(this).removeClass("fa-trash").addClass("fa-spinner").addClass("fa-spin"),$.post({url:$(this).data("url"),data:{_method:"DELETE"},context:this}).done((function(t,e,n){$(this).parent().fadeOut(),h(t.enabled),p()}))}))}))}function d(){$(".entity-file-rename").each((function(t){$(this).unbind("click").on("click",(function(t){$(this).parent().children("a").hide(),$(this).parent().children("input").val($(this).data("default")).show().focus(),$(this).hide()}))}))}function f(){$(".entity-file-name").each((function(){$(this).unbind("keypress").unbind("focusout").keypress((function(t){var e;13===(t.keyCode||t.which)&&(t.preventDefault(),e=$(this).parent().children("a"),$.post({url:$(this).data("url"),data:{_method:"PATCH",name:$(this).val(),"csrf-token":$(".csrf-token").val()},datatype:"JSON",context:this}).done((function(t){var n=$(this).val();$(this).val(n).hide(),e.data("default",n).html(n).show(),$(this).parent().children(".entity-file-rename").data("default",n).show(),$(".entity-file-error").hide(),p()})).fail((function(t){$(this).parent().children(".entity-file-error").text(c(t.responseJSON.errors)).show()})))})).focusout((function(t){link=$(this).parent().children("a"),$(this).val($(this).data("default")),link.show(),$(this).hide(),$(this).parent().children(".entity-file-rename").show(),$(".entity-file-error").hide()}))}))}function u(){$(".entity-file-visibility").on("click",(function(t){t.preventDefault();var e=$(this).parent().parent(),n=e.data("target"),i=e.data("target-loading");$("#"+n).removeClass("fas far fa-lock fa-user-lock fa-eye entity-file-visibility-dropdown").addClass("hidden"),$("#"+i).removeClass("hidden"),$.post({url:$(this).data("url"),data:{_method:"PATCH",visibility:$(this).data("visibility"),"csrf-token":$(".csrf-token").val()},datatype:"JSON",context:this}).done((function(t){var e=$(this).parent().parent(),n=e.data("target"),i=e.data("target-loading");$("#"+n).removeClass("hidden"),$("#"+n).addClass($(this).data("icon")+" entity-file-visibility-dropdown").prop("title",$(this).attr("title")),$("#"+i).addClass("hidden")}))}))}function c(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=t[n]+"\n");return e}function h(t){t?(a.fadeIn(),r.hide()):(a.hide(),r.fadeIn())}function p(){$(".entity-file-list").each((function(){$.ajax({url:$(this).data("url"),context:this}).done((function(t){t&&$(this).html(t)}))}))}$(document).ready((function(){n=$(".entity-file-ui"),i=$("#entity-modal"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),1===n.length&&n.on("click",(function(t){s=!0,i.on("shown.bs.modal",(function(t){!function(){if(!s)return;console.log("file modal loaded"),s=!1,a=$(".entity-files-drop"),o=$("#entity-file-progress"),r=$(".entity-file-upload-max"),a.bind("drop",(function(t){t.preventDefault(),o.show()})).on("click",(function(t){console.log("clicked"),$("#entity-file-upload").trigger("click")})),$("#entity-file-upload").fileupload({dropZone:a,dataType:"json",add:function(t,e){a.hide(),$(".entity-file-upload-error").hide(),e.submit()},progressall:function(t,e){var n=parseInt(e.loaded/e.total*100,10);$(".progress").show(),$(".progress .progress-bar").css("width",n+"%")},done:function(t,e){$(".progress").hide(),console.log("done",e.result),e.result.success?(!function(t){$(".entity-files").html(t.html),l(),d(),f(),u()}(e.result),h(e.result.enabled),$(".entity-file-upload-error").hide(),p()):($(".entity-file-upload-error").text(e.result.error).fadeIn(),console.log("no success"))},fail:function(t,e){h(!0),$(".progress").hide(),$(".entity-file-upload-error").text(c(e.jqXHR.responseJSON.errors)).fadeToggle()}}),a.bind("drop",(function(t){o.show()}))}(),l(),d(),f(),u()}))})),$(".entity-private-toggle").click((function(){$(this).addClass("disabled"),$(this).children("i.fa").removeClass().addClass("fa fa-spin fa-spinner"),$.post({url:$(this).data("url"),data:{},context:this}).done((function(t){if(t.success){var e=$(this).children("i.fa"),n=t.status?$(e).data("off"):$(e).data("on"),i=t.status?$(e).data("title-off"):$(e).data("title-on");e.removeClass().addClass("fa").addClass("fa-"+n).attr("title",i),$(this).removeClass("disabled")}}))}))}))}});